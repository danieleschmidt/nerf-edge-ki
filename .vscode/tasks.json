{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Web: Install Dependencies",
      "type": "shell",
      "command": "npm",
      "args": ["install"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Web: Build Production",
      "type": "shell",
      "command": "npm",
      "args": ["run", "build"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": ["$tsc"]
    },
    {
      "label": "Web: Start Dev Server",
      "type": "shell",
      "command": "npm",
      "args": ["run", "dev"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "isBackground": true,
      "problemMatcher": {
        "owner": "webpack",
        "pattern": {
          "regexp": "^\\s*ERROR\\s+in\\s+(.*):(\\d+):(\\d+)$",
          "file": 1,
          "line": 2,
          "column": 3
        },
        "background": {
          "activeOnStart": true,
          "beginsPattern": "webpack building...",
          "endsPattern": "webpack built"
        }
      }
    },
    {
      "label": "Web: Run Tests",
      "type": "shell",
      "command": "npm",
      "args": ["test"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Web: Run Tests with Coverage",
      "type": "shell",
      "command": "npm",
      "args": ["run", "test:coverage"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Web: Lint",
      "type": "shell",
      "command": "npm",
      "args": ["run", "lint"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": ["$eslint-stylish"]
    },
    {
      "label": "Web: Lint Fix",
      "type": "shell",
      "command": "npm",
      "args": ["run", "lint:fix"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": ["$eslint-stylish"]
    },
    {
      "label": "Python: Setup Virtual Environment",
      "type": "shell",
      "command": "python",
      "args": ["-m", "venv", "venv"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Python: Install Dependencies",
      "type": "shell",
      "command": "./venv/bin/pip",
      "args": ["install", "-r", "requirements.txt", "-r", "requirements-dev.txt"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": [],
      "dependsOn": "Python: Setup Virtual Environment"
    },
    {
      "label": "Python: Run Tests",
      "type": "shell",
      "command": "./venv/bin/python",
      "args": ["-m", "pytest", "python/tests/", "-v"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Python: Run Tests with Coverage",
      "type": "shell",
      "command": "./venv/bin/python",
      "args": ["-m", "pytest", "python/tests/", "--cov=nerf_edge_kit", "--cov-report=html"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Python: Lint (Flake8)",
      "type": "shell",
      "command": "./venv/bin/flake8",
      "args": ["python/"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": {
        "owner": "flake8",
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+):\\s+(\\w+)\\s+(.+)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "severity": 4,
          "message": 5
        }
      }
    },
    {
      "label": "Python: Format (Black)",
      "type": "shell",
      "command": "./venv/bin/black",
      "args": ["python/"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Python: Type Check (MyPy)",
      "type": "shell",
      "command": "./venv/bin/mypy",
      "args": ["python/nerf_edge_kit/"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": {
        "owner": "mypy",
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+):\\s+(error|warning|note):\\s+(.+)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "severity": 4,
          "message": 5
        }
      }
    },
    {
      "label": "iOS: Build Framework",
      "type": "shell",
      "command": "xcodebuild",
      "args": [
        "-project", "ios/NerfEdgeKit.xcodeproj",
        "-scheme", "NerfEdgeKit",
        "-destination", "generic/platform=iOS",
        "build"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": {
        "owner": "xcode",
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+):\\s+(error|warning):\\s+(.+)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "severity": 4,
          "message": 5
        }
      }
    },
    {
      "label": "iOS: Run Tests",
      "type": "shell",
      "command": "xcodebuild",
      "args": [
        "test",
        "-project", "ios/NerfEdgeKit.xcodeproj",
        "-scheme", "NerfEdgeKitTests",
        "-destination", "platform=iOS Simulator,name=iPhone 15 Pro"
      ],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": {
        "owner": "xcode",
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+):\\s+(error|warning):\\s+(.+)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "severity": 4,
          "message": 5
        }
      }
    },
    {
      "label": "Docker: Build Development",
      "type": "shell",
      "command": "docker",
      "args": [
        "build",
        "-t", "nerf-edge-kit:dev",
        "--target", "development",
        "."
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Docker: Run Development Container",
      "type": "shell",
      "command": "docker",
      "args": [
        "run",
        "-it",
        "--rm",
        "-p", "3000:3000",
        "-p", "8080:8080",
        "-v", "${workspaceFolder}:/app",
        "nerf-edge-kit:dev"
      ],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "dependsOn": "Docker: Build Development",
      "problemMatcher": []
    },
    {
      "label": "Performance: Run Benchmarks",
      "type": "shell",
      "command": "npm",
      "args": ["run", "test:perf"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Security: Run Secret Scan",
      "type": "shell",
      "command": "detect-secrets",
      "args": ["scan", "--baseline", ".secrets.baseline"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Clean: All Build Artifacts",
      "type": "shell",
      "command": "rm",
      "args": ["-rf", "dist", "coverage", "node_modules/.cache", "python/__pycache__"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    }
  ]
}